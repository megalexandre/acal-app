"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[684],{8684:(Q,h,c)=>{c.r(h),c.d(h,{LinkModule:()=>z});var d=c(177),s=c(9417),g=c(9005),b=c(8147),k=c(5464),C=c(6411),_=c(115),F=c(3887),v=c(6354),y=c(5312);class p{constructor(r,t,i,n,l){this.id=r,this.number=t,this.letter=i,this.address=n,this.has_hydrometer=l}get name(){return`${this.address}: ${this.number}-${this.letter}`}static fromJson(r){return new p(r.id,r.number,r.letter,r.address,r.has_hydrometer)}}class u{constructor(r,t,i,n,l,a,H,P){this.id=r,this.number=t,this.category=i,this.customer=n,this.place=l,this.total=a,this.exclusive_member=H,this.active=P}static fromJson(r){return new u(r.id,r.number,r.category,r.customer,p.fromJson(r.place),r.total,r.exclusive_member,r.active)}}var e=c(4438),j=c(1626);let m=(()=>{class o{constructor(t){this.http=t,this.apiUrl=`${y.c.apiUrl}/link`}paginate(t){return this.http.post(`${this.apiUrl}/paginate`,t).pipe((0,v.T)(i=>(i.content=i.content.map(n=>u.fromJson(n)),i)))}create(t){return this.http.post(this.apiUrl,t)}update(t){return this.http.put(this.apiUrl,t)}delete(t){return this.http.delete(`${this.apiUrl}/${t}`)}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(j.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var f=c(1188),M=c(9830);let T=(()=>{class o{constructor(){this.value="",this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this.value=t||""}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}onChangeValue(t){this.value=t,this.onChange(t)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["monetary"]],features:[e.Jv_([{provide:s.kq,useExisting:(0,e.Rfq)(()=>o),multi:!0}])],decls:1,vars:2,consts:[["type","text","mask","separator.2","thousandSeparator",".","placeholder","0,00","decimalMarker",",",1,"form-control",3,"ngModelChange","blur","dropSpecialCharacters","ngModel"]],template:function(i,n){1&i&&(e.j41(0,"input",0),e.bIt("ngModelChange",function(a){return n.onChangeValue(a)})("blur",function(){return n.onTouched()}),e.k0s()),2&i&&e.Y8G("dropSpecialCharacters",!1)("ngModel",n.value)},dependencies:[s.me,s.BC,s.vS,M.Zr],encapsulation:2})}}return o})();var E=c(9459),R=c(6356),I=c(7186),L=c(43);const G=["*"];let S=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-card-footer"]],ngContentSelectors:G,decls:2,vars:0,consts:[[1,"card-footer"]],template:function(i,n){1&i&&(e.NAR(),e.j41(0,"div",0),e.SdG(1),e.k0s())},encapsulation:2})}}return o})();var V=c(6271),$=c(922);function w(o,r){if(1&o&&(e.j41(0,"option",1),e.EFF(1),e.k0s()),2&o){const t=r.$implicit;e.Y8G("ngValue",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function B(o,r){if(1&o&&(e.qex(0),e.j41(1,"optgroup",3),e.nI1(2,"group"),e.DNE(3,w,2,2,"option",4),e.k0s(),e.bVm()),2&o){const t=r.$implicit;e.R7$(),e.Y8G("label",e.bMT(2,2,t.group)),e.R7$(2),e.Y8G("ngForOf",t.categories)}}let O=(()=>{class o{constructor(t){this.service=t,this.disabled=!1,this.groups=[],this.value=null,this.onChange=()=>{},this.onTouch=()=>{},this.loading()}loading(){this.service.get().subscribe({next:t=>{this.groups=this.buildGroups(t)}})}buildGroups(t){return Array.from(new Set(t.map(i=>i.group))).sort((i,n)=>i.localeCompare(n)).map(i=>({group:i,categories:t.filter(n=>n.group===i).sort((n,l)=>n.name.localeCompare(l.name))}))}writeValue(t){this.value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouch=t}setDisabledState(t){this.disabled=t}onSelectionChange(t){this.value=t,this.onChange(t),this.onTouch()}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(V.M))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-category-select"]],inputs:{disabled:"disabled"},features:[e.Jv_([{provide:s.kq,useExisting:(0,e.Rfq)(()=>o),multi:!0}])],decls:4,vars:4,consts:[[1,"form-select",3,"ngModelChange","disabled","ngModel"],[3,"ngValue"],[4,"ngFor","ngForOf"],[3,"label"],[3,"ngValue",4,"ngFor","ngForOf"]],template:function(i,n){1&i&&(e.j41(0,"select",0),e.bIt("ngModelChange",function(a){return n.onSelectionChange(a)}),e.j41(1,"option",1),e.EFF(2,"Selecione..."),e.k0s(),e.DNE(3,B,4,4,"ng-container",2),e.k0s()),2&i&&(e.Y8G("disabled",n.disabled)("ngModel",n.value),e.R7$(),e.Y8G("ngValue",null),e.R7$(2),e.Y8G("ngForOf",n.groups))},dependencies:[d.Sq,s.xH,s.y7,s.wz,s.BC,s.vS,$.c],encapsulation:2})}}return o})();var N=c(6181);function Y(o,r){if(1&o&&(e.j41(0,"option",1),e.EFF(1),e.k0s()),2&o){const t=r.$implicit;e.Y8G("ngValue",t.name),e.R7$(),e.SpI(" ",t.name," ")}}let x=(()=>{class o{constructor(t){this.service=t,this.disabled=!1,this.addresses=[],this.value=null,this.onChange=()=>{},this.onTouch=()=>{},this.loading()}loading(){this.service.getAddresses().subscribe({next:t=>{this.addresses=t}})}writeValue(t){this.value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouch=t}setDisabledState(t){this.disabled=t}onSelectionChange(t){this.value=t,this.onChange(t),this.onTouch()}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(N.E))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-address-select"]],inputs:{disabled:"disabled"},features:[e.Jv_([{provide:s.kq,useExisting:(0,e.Rfq)(()=>o),multi:!0}])],decls:4,vars:4,consts:[[1,"form-select",3,"ngModelChange","disabled","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"]],template:function(i,n){1&i&&(e.j41(0,"select",0),e.bIt("ngModelChange",function(a){return n.onSelectionChange(a)}),e.j41(1,"option",1),e.EFF(2,"Selecione..."),e.k0s(),e.DNE(3,Y,2,2,"option",2),e.k0s()),2&i&&(e.Y8G("disabled",n.disabled)("ngModel",n.value),e.R7$(),e.Y8G("ngValue",null),e.R7$(2),e.Y8G("ngForOf",n.addresses))},dependencies:[d.Sq,s.xH,s.y7,s.wz,s.BC,s.vS],encapsulation:2})}}return o})();function D(o,r){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.nI1(13,"currency"),e.k0s(),e.j41(14,"td",40)(15,"ul",41)(16,"li",42)(17,"a",43),e.bIt("click",function(){const n=e.eBV(t).$implicit,l=e.XpG(2);return e.Njj(l.delete(n))}),e.nrm(18,"i",44),e.k0s()()()()()}if(2&o){const t=r.$implicit;e.R7$(2),e.JRh(t.customer.name),e.R7$(2),e.JRh(t.category.name),e.R7$(2),e.JRh(t.place.address),e.R7$(2),e.JRh(t.place.number),e.R7$(2),e.JRh(t.place.letter),e.R7$(2),e.JRh(e.i5U(13,6,t.total,"BRL"))}}function U(o,r){if(1&o&&(e.j41(0,"div",30)(1,"table",31)(2,"thead",32)(3,"tr")(4,"th",33),e.EFF(5,"Nome"),e.k0s(),e.j41(6,"th",34),e.EFF(7,"Categoria"),e.k0s(),e.j41(8,"th",35),e.EFF(9,"Local"),e.k0s(),e.j41(10,"th",36),e.EFF(11,"N\xfamero"),e.k0s(),e.j41(12,"th",36),e.EFF(13,"Letra"),e.k0s(),e.j41(14,"th",36),e.EFF(15,"Valor"),e.k0s(),e.j41(16,"th",37),e.EFF(17,"A\xe7\xf5es"),e.k0s()()(),e.j41(18,"tbody",38),e.DNE(19,D,19,9,"tr",39),e.k0s()()()),2&o){const t=e.XpG();e.R7$(19),e.Y8G("ngForOf",t.page.content)("ngForTrackBy",t.trackById)}}function X(o,r){if(1&o){const t=e.RV6();e.j41(0,"div",45)(1,"div",46),e.EFF(2," itens por pagina: "),e.j41(3,"select",47),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.filter.size,n)||(l.filter.size=n),e.Njj(n)}),e.bIt("change",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.search())}),e.j41(4,"option",48),e.EFF(5,"10"),e.k0s(),e.j41(6,"option",49),e.EFF(7,"20"),e.k0s(),e.j41(8,"option",50),e.EFF(9,"50"),e.k0s(),e.j41(10,"option",51),e.EFF(11,"100"),e.k0s()(),e.j41(12,"div",52),e.EFF(13),e.k0s()(),e.j41(14,"div",53)(15,"app-button",54),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadPage(0))}),e.nrm(16,"i",55),e.EFF(17,"Primeira "),e.k0s(),e.j41(18,"app-button",54),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadPage(n.page.number-1))}),e.nrm(19,"i",56),e.EFF(20,"Anterior "),e.k0s(),e.j41(21,"app-button",57),e.nrm(22,"i",58),e.EFF(23),e.k0s(),e.j41(24,"app-button",54),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadPage(n.page.number+1))}),e.nrm(25,"i",59),e.EFF(26," Pr\xf3xima "),e.k0s(),e.j41(27,"app-button",54),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadPage(n.page.total_pages-1))}),e.nrm(28,"i",60),e.EFF(29," Ultima "),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(3),e.R50("ngModel",t.filter.size),e.R7$(10),e.Lme("P\xe1gina ",t.page.number+1," de ",t.page.total_pages,""),e.R7$(2),e.Y8G("disabled",t.page.first),e.R7$(3),e.Y8G("disabled",t.page.first),e.R7$(3),e.Y8G("disabled",!0),e.R7$(2),e.SpI(" ",t.page.number+1," "),e.R7$(),e.Y8G("disabled",t.page.last),e.R7$(3),e.Y8G("disabled",t.page.last)}}const A=[{path:"",component:(()=>{class o{constructor(t,i){this.service=t,this.modalService=i,this.page=null,this.filter={category:null,address:null,letter:null,number:null,page:0,size:20,sort_orders:[{property:"customer.normalizedName",direction:"ASC"}]},this.loading=!0}ngOnInit(){this.search()}search(){this.loading=!0,this.service.paginate(this.filter).subscribe({next:t=>{this.page=t,this.loading=!1},error:()=>{this.loading=!1}})}trackById(t,i){return i.id}loadPage(t){this.page&&(t<0||t>=this.page.total_pages||(this.filter.page=t,this.search()))}create(){}delete(t){}edit(t){}openModal(t,i){const n=this.modalService.open(t,{centered:!0}).componentInstance;i&&Object.assign(n,i),n.sent.subscribe(()=>this.search())}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(m),e.rXU(g.Bq))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-link"]],decls:55,vars:8,consts:[[1,"row"],[1,"col-lg-12"],[1,"card-title","flex-grow-1","mb-0"],[1,"d-flex","gap-1","flex-wrap","justify-content-end"],["btnType","success","outline","",3,"click"],[1,"ri-add-line","me-1"],[1,"accordion","w-100"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","false","aria-controls","collapseOne",1,"accordion-button","collapsed"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,"accordion-body"],[1,"container-fluid"],[1,"row","g-2","align-items-end"],[1,"col-md-8","col-12"],[1,"form-label"],["type","text","placeholder","Nome",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],[1,"col-md-4","col-12"],[3,"ngModelChange","change","ngModel"],[1,"col-md-6","col-12"],[1,"col-md-2","col-4"],["type","text","placeholder","N\xba",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],["type","text","placeholder","Letra",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],["placeholder","Valor",3,"ngModelChange","keydown.enter","ngModel"],[1,"col-12","col-md-3","offset-md-9","d-grid"],[1,"form-label","invisible"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"mdi","mdi-magnify"],["class","table-responsive table-card",4,"ngIf"],["class","d-flex flex-wrap justify-content-between align-items-center mt-3",4,"ngIf"],[1,"table-responsive","table-card"],[1,"table","table-hover","table-striped","align-middle","table-nowrap","mb-0"],[1,"table-light"],[2,"width","40%"],[2,"width","20%"],[2,"width","10%"],[2,"width","5%"],[1,"text-center",2,"width","5%"],[1,"list","form-check-all"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-center"],[1,"list-inline","hstack","gap-2","mb-0","justify-content-center"],[1,"list-inline-item"],["ngbTooltip","Remover","placement","top",1,"text-danger",3,"click"],[1,"ri-delete-bin-5-fill","fs-16"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","mt-3"],[1,"mb-2"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value","10","selected",""],["value","20","selected",""],["value","50","selected",""],["value","100","selected",""],[1,"text-muted"],[1,"d-flex","gap-2","flex-wrap"],["btnType","primary","outline","",3,"click","disabled"],[1,"mdi","mdi-chevron-double-left"],[1,"mdi","mdi-chevron-left"],["btnType","primary","outline","",3,"disabled"],[1,"mdi","mdi-cellphone-link"],[1,"mdi","mdi-chevron-right"],[1,"mdi","mdi-chevron-double-right"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"app-card")(3,"app-card-header")(4,"h5",2),e.EFF(5,"Liga\xe7\xf5es"),e.k0s(),e.j41(6,"div",3)(7,"app-button",4),e.bIt("click",function(){return n.create()}),e.nrm(8,"i",5),e.EFF(9," Adicionar "),e.k0s()()(),e.j41(10,"app-card-header")(11,"div",6)(12,"div",7)(13,"h2",8)(14,"button",9),e.EFF(15,"Filtros"),e.k0s()(),e.j41(16,"div",10)(17,"div",11)(18,"div",12)(19,"div",13)(20,"div",14)(21,"label",15),e.EFF(22,"Nome"),e.k0s(),e.j41(23,"input",16),e.mxI("ngModelChange",function(a){return e.DH7(n.filter.name,a)||(n.filter.name=a),a}),e.bIt("keydown.enter",function(){return n.search()}),e.k0s()(),e.j41(24,"div",17)(25,"label",15),e.EFF(26,"Categoria"),e.k0s(),e.j41(27,"app-category-select",18),e.mxI("ngModelChange",function(a){return e.DH7(n.filter.category,a)||(n.filter.category=a),a}),e.bIt("change",function(){return n.search()}),e.k0s()(),e.j41(28,"div",19)(29,"label",15),e.EFF(30,"Endere\xe7o"),e.k0s(),e.j41(31,"app-address-select",18),e.mxI("ngModelChange",function(a){return e.DH7(n.filter.address,a)||(n.filter.address=a),a}),e.bIt("change",function(){return n.search()}),e.k0s()(),e.j41(32,"div",20)(33,"label",15),e.EFF(34,"N\xfamero"),e.k0s(),e.j41(35,"input",21),e.mxI("ngModelChange",function(a){return e.DH7(n.filter.number,a)||(n.filter.number=a),a}),e.bIt("keydown.enter",function(){return n.search()}),e.k0s()(),e.j41(36,"div",20)(37,"label",15),e.EFF(38,"Letra"),e.k0s(),e.j41(39,"input",22),e.mxI("ngModelChange",function(a){return e.DH7(n.filter.letter,a)||(n.filter.letter=a),a}),e.bIt("keydown.enter",function(){return n.search()}),e.k0s()(),e.j41(40,"div",20)(41,"label",15),e.EFF(42,"Valor"),e.k0s(),e.j41(43,"monetary",23),e.mxI("ngModelChange",function(a){return e.DH7(n.filter.total,a)||(n.filter.total=a),a}),e.bIt("keydown.enter",function(){return n.search()}),e.k0s()()(),e.j41(44,"div",0)(45,"div",24)(46,"label",25),e.EFF(47,"Buscar"),e.k0s(),e.j41(48,"button",26),e.bIt("click",function(){return n.search()}),e.nrm(49,"i",27),e.EFF(50," Buscar"),e.k0s()()()()()()()()(),e.j41(51,"app-card-body"),e.DNE(52,U,20,2,"div",28),e.k0s(),e.j41(53,"app-card-footer"),e.DNE(54,X,30,9,"div",29),e.k0s()()()()),2&i&&(e.R7$(23),e.R50("ngModel",n.filter.name),e.R7$(4),e.R50("ngModel",n.filter.category),e.R7$(4),e.R50("ngModel",n.filter.address),e.R7$(4),e.R50("ngModel",n.filter.number),e.R7$(4),e.R50("ngModel",n.filter.letter),e.R7$(4),e.R50("ngModel",n.filter.total),e.R7$(9),e.Y8G("ngIf",n.page),e.R7$(2),e.Y8G("ngIf",n.page))},dependencies:[s.xH,s.y7,s.me,s.wz,s.BC,s.vS,d.Sq,d.bT,T,E.Q,R.i,I.l,L.q,S,O,x,d.oe],encapsulation:2})}}return o})()}];let J=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[f.iI.forChild(A),f.iI]})}}return o})(),z=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({providers:[m],imports:[s.YN,s.X1,J,k.M.pick(C.Wzl),g.c9,d.MD,F.G,b.h,_.i]})}}return o})()}}]);