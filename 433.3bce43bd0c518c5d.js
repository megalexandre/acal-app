"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[433],{1728:(b,m,a)=>{a.d(m,{i:()=>A});var i=a(177),c=a(9417),l=a(9830),n=(a(9459),a(4438));let o=(()=>{class f{static{this.\u0275fac=function(C){return new(C||f)}}static{this.\u0275mod=n.$C({type:f})}static{this.\u0275inj=n.G2t({imports:[i.MD]})}}return f})();a(8659),a(922);let F=(()=>{class f{static{this.\u0275fac=function(C){return new(C||f)}}static{this.\u0275mod=n.$C({type:f})}static{this.\u0275inj=n.G2t({imports:[i.MD]})}}return f})();var I=a(7276);a(6436),a(9283),a(7631),a(4087);let A=(()=>{class f{static{this.\u0275fac=function(C){return new(C||f)}}static{this.\u0275mod=n.$C({type:f})}static{this.\u0275inj=n.G2t({providers:[(0,l.Dw)(),I.t],imports:[i.MD,o,F,c.YN,c.X1,o,F]})}}return f})()},9459:(b,m,a)=>{a.d(m,{Q:()=>y});var i=a(4438),c=a(177);const l=["*"];let y=(()=>{class n{constructor(){this.type="button",this.btnType="primary",this.disabled=!1,this.outline=!1}get buttonClasses(){return["btn",`${this.isOutline?"btn-outline":"btn"}-${this.btnType}`]}get isOutline(){return""===this.outline||!0===this.outline||"true"===this.outline}static{this.\u0275fac=function(d){return new(d||n)}}static{this.\u0275cmp=i.VBU({type:n,selectors:[["app-button"]],inputs:{type:"type",btnType:"btnType",disabled:"disabled",outline:"outline"},ngContentSelectors:l,decls:2,vars:3,consts:[[3,"type","ngClass","disabled"]],template:function(d,h){1&d&&(i.NAR(),i.j41(0,"button",0),i.SdG(1),i.k0s()),2&d&&i.Y8G("type",h.type)("ngClass",h.buttonClasses)("disabled",h.disabled)},dependencies:[c.YU],encapsulation:2})}}return n})()},43:(b,m,a)=>{a.d(m,{q:()=>l});var i=a(4438);const c=["*"];let l=(()=>{class y{static{this.\u0275fac=function(u){return new(u||y)}}static{this.\u0275cmp=i.VBU({type:y,selectors:[["app-card-body"]],ngContentSelectors:c,decls:2,vars:0,consts:[[1,"card-body"]],template:function(u,d){1&u&&(i.NAR(),i.j41(0,"div",0),i.SdG(1),i.k0s())},encapsulation:2})}}return y})()},7186:(b,m,a)=>{a.d(m,{l:()=>l});var i=a(4438);const c=["*"];let l=(()=>{class y{static{this.\u0275fac=function(u){return new(u||y)}}static{this.\u0275cmp=i.VBU({type:y,selectors:[["app-card-header"]],ngContentSelectors:c,decls:2,vars:0,consts:[[1,"card-header","d-flex","align-items-center"]],template:function(u,d){1&u&&(i.NAR(),i.j41(0,"div",0),i.SdG(1),i.k0s())},encapsulation:2})}}return y})()},6356:(b,m,a)=>{a.d(m,{i:()=>y});var i=a(4438);const c=[[["app-card-header"]],[["app-card-body"]],[["app-card-footer"]]],l=["app-card-header","app-card-body","app-card-footer"];let y=(()=>{class n{static{this.\u0275fac=function(d){return new(d||n)}}static{this.\u0275cmp=i.VBU({type:n,selectors:[["app-card"]],ngContentSelectors:l,decls:4,vars:0,consts:[[1,"card"]],template:function(d,h){1&d&&(i.NAR(c),i.j41(0,"div",0),i.SdG(1),i.SdG(2,1),i.SdG(3,2),i.k0s())},encapsulation:2})}}return n})()},8659:(b,m,a)=>{a.d(m,{F:()=>c});var i=a(4438);let c=(()=>{class l{transform(n){return"true"===n||!0===n?"Sim":"N\xe3o"}static{this.\u0275fac=function(o){return new(o||l)}}static{this.\u0275pipe=i.EJ8({name:"yesOrNo",type:l,pure:!0})}}return l})()},4087:(b,m,a)=>{a.d(m,{h:()=>c});var i=a(4438);let c=(()=>{class l{constructor(){this.translations={FOUNDER:"S\xf3cio Fundador",EFFECTIVE:"S\xf3cio Efetivo",TEMPORARY:"Tempor\xe1rio"}}transform(n){return n?this.translations[n]?this.translations[n]:n:""}static{this.\u0275fac=function(o){return new(o||l)}}static{this.\u0275pipe=i.EJ8({name:"category",type:l,pure:!0})}}return l})()},922:(b,m,a)=>{a.d(m,{c:()=>c});var i=a(4438);let c=(()=>{class l{constructor(){this.groups=[{name:"S\xf3cio Fundador",value:"FOUNDER"},{name:"S\xf3cio Efetivo",value:"EFFECTIVE"},{name:"Tempor\xe1rio",value:"TEMPORARY"}]}transform(n){const o=this.groups.find(u=>u.value===n);return o?o.name:n}static{this.\u0275fac=function(o){return new(o||l)}}static{this.\u0275pipe=i.EJ8({name:"group",type:l,pure:!0})}}return l})()},9283:(b,m,a)=>{a.d(m,{h:()=>c});var i=a(4438);let c=(()=>{class l{constructor(){this.reasonMap={INVOICE_PAYMENT:"PAGAMENTO",INVOICE_REFUND:"ESTORNO",INVOICE_DELETE:"CANCELAMENTO"}}transform(n){return"string"==typeof n&&this.reasonMap[n]?this.reasonMap[n]:"true"===n||!0===n?"Sim":"N\xe3o"}static{this.\u0275fac=function(o){return new(o||l)}}static{this.\u0275pipe=i.EJ8({name:"reason",type:l,pure:!0})}}return l})()},6436:(b,m,a)=>{a.d(m,{o:()=>c});var i=a(4438);let c=(()=>{class l{constructor(){this.months=["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"]}transform(n){if(!n)return"";let o,u;if(n.includes("-")){const[d,h]=n.split("-").map(F=>parseInt(F,10));o=d,u=h}else{const d=new Date(n);o=d.getFullYear(),u=d.getMonth()+1}return`${this.months[u-1]}/${o}`}static{this.\u0275fac=function(o){return new(o||l)}}static{this.\u0275pipe=i.EJ8({name:"reference",type:l,pure:!0})}}return l})()},7631:(b,m,a)=>{a.d(m,{_:()=>c});var i=a(4438);let c=(()=>{class l{transform(n,o){return n&&o?n.reduce((u,d)=>u+parseFloat(d[o]||0),0):0}static{this.\u0275fac=function(o){return new(o||l)}}static{this.\u0275pipe=i.EJ8({name:"sumByKey",type:l,pure:!0})}}return l})()},7276:(b,m,a)=>{a.d(m,{t:()=>l});class i{static isValid(n){if(!n||/^(\d)\1+$/.test(n)||11!==n.length)return!1;let o=0;for(let h=0;h<9;h++)o+=parseInt(n.charAt(h))*(10-h);let u=10*o%11;if(u>=10&&(u=0),u!==parseInt(n.charAt(9)))return!1;o=0;for(let h=0;h<10;h++)o+=parseInt(n.charAt(h))*(11-h);let d=10*o%11;return d>=10&&(d=0),d===parseInt(n.charAt(10))}static valid(){return n=>{const o=n.value?.replace(/\D/g,"");return o&&this.isValid(o)?null:{invalidCPF:!0}}}}class c{static isValid(n){if(!n||/^(\d)\1+$/.test(n)||14!==n.length)return!1;const o=u=>{const d=12===u?[5,4,3,2,9,8,7,6,5,4,3,2]:[6,5,4,3,2,9,8,7,6,5,4,3,2],F=n.substring(0,u).split("").map(Number).reduce((t,T,_)=>t+T*d[_],0)%11;return(F<2?0:11-F)===parseInt(n.charAt(u))};return o(12)&&o(13)}static valid(){return n=>{const o=n.value?.replace(/\D/g,"");return o&&this.isValid(o)?null:{invalidCNPJ:!0}}}}class l{static valid(){return n=>{const o=n.value?.replace(/\D/g,"");return!o||11===o.length&&i.isValid(o)||14===o.length&&c.isValid(o)?null:{invalidCpfOrCnpj:!0}}}}},9433:(b,m,a)=>{a.r(m),a.d(m,{WaterQualityModule:()=>J});var i=a(177),c=a(9417),l=a(7810),y=a(8147),n=a(7038),o=a(5464),u=a(6411),d=a(1728),h=a(3887),F=a(7673),I=a(5312),t=a(4438),T=a(1626);let _=(()=>{class r{constructor(e){this.http=e,this.apiUrl=`${I.c.apiUrl}/water-quality`}get(){return this.http.get(this.apiUrl)}create(e){return this.http.post(this.apiUrl,e)}update(e){return this.http.put(this.apiUrl,e)}delete(e){return this.http.delete(`${this.apiUrl}/${e}`)}getWaterParams(){return(0,F.of)([{name:"Cloro - Min 0,2 mg/l"},{name:"Coliformes Totais"},{name:"Cor aparente - 15UH"},{name:"Eschirichia Coli"},{name:"Turbidez - 5.0 UT"}])}static{this.\u0275fac=function(s){return new(s||r)(t.KVO(T.Qq))}}static{this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var M=a(803),O=a(467),G=a(5794),A=a(9459),f=a(4988);const R=(r,v)=>({"is-invalid":r,"is-valid":v});function g(r,v){if(1&r){const e=t.RV6();t.j41(0,"div",20)(1,"h5",21),t.EFF(2,"Coleta"),t.k0s(),t.j41(3,"button",22),t.bIt("click",function(){t.eBV(e);const p=t.XpG();return t.Njj(p.close())}),t.k0s()()}}function C(r,v){1&r&&(t.j41(0,"div",23),t.EFF(1,"V\xe1lido"),t.k0s())}function k(r,v){1&r&&(t.qex(0),t.EFF(1," N\xfamero \xe9 obrigat\xf3rio "),t.bVm())}function j(r,v){if(1&r&&(t.j41(0,"div",24),t.DNE(1,k,2,0,"ng-container",25),t.k0s()),2&r){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.reference||null==e.reference.errors?null:e.reference.errors.required)}}function D(r,v){if(1&r&&(t.j41(0,"tr",26)(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.nrm(4,"input",27),t.k0s(),t.j41(5,"td"),t.nrm(6,"input",28),t.k0s(),t.j41(7,"td"),t.nrm(8,"input",29),t.k0s()()),2&r){const e=v.index,s=t.XpG();t.Y8G("formGroupName",e),t.R7$(2),t.SpI(" ",s.waterParams[e].name," "),t.R7$(2),t.Y8G("ngClass",t.l_i(5,R,s.isAnalysisInvalid(e,"required"),s.isAnalysisValid(e,"required"))),t.R7$(2),t.Y8G("ngClass",t.l_i(8,R,s.isAnalysisInvalid(e,"analyzed"),s.isAnalysisValid(e,"analyzed"))),t.R7$(2),t.Y8G("ngClass",t.l_i(11,R,s.isAnalysisInvalid(e,"conformity"),s.isAnalysisValid(e,"conformity")))}}let N=(()=>{class r{constructor(e,s,p,E){this.fb=e,this.service=s,this.activeModal=p,this.t=E,this.sent=new t.bkB,this.submitted=!1,this.waterParams=[],this.loaded=!1}ngOnInit(){this.service.getWaterParams().subscribe({next:e=>{this.waterParams=e,this.initForm()}})}initForm(){this.form=this.fb.group({reference:["",[c.k0.required]],analysis:this.fb.array(this.waterParams.map(e=>this.createAnalysisGroup(e)))})}createAnalysisGroup(e){return this.fb.group({name:[e.name,c.k0.required],analyzed:[6,c.k0.required],required:[6,c.k0.required],conformity:[6,c.k0.required]})}onSubmit(){var e=this;return(0,O.A)(function*(){e.submitted=!0,e.form.markAllAsTouched(),e.form.valid&&e.service.create(e.form.value).subscribe({next:()=>{e.sent.emit(),e.close()},error:s=>{e.t.error(s)}})})()}markAllAsTouched(){this.form.markAllAsTouched(),this.analysisArray.controls.forEach(e=>{e.markAllAsTouched()})}isFieldInvalid(e){const s=this.form.get(e);return s?.invalid&&(s?.dirty||s?.touched)||!1}isAnalysisInvalid(e,s){const p=this.analysisArray.at(e).get(s);return this.submitted&&p?.invalid||!1}isAnalysisValid(e,s){const p=this.analysisArray.at(e).get(s);return this.submitted&&p?.valid||!1}get analysis(){return this.form.get("analysis")}get reference(){return this.form.get("reference")}get analysisArray(){return this.form.get("analysis")}close(){this.activeModal.close()}isValid(e){return this.getControl(e)?.valid&&this.submitted||!1}isInvalid(e){return this.getControl(e)?.invalid&&this.submitted||!1}getControl(e){return this.form.get(e)}static{this.\u0275fac=function(s){return new(s||r)(t.rXU(c.ok),t.rXU(_),t.rXU(l.Lw),t.rXU(G.tw))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-water-quality-create"]],outputs:{sent:"sent"},decls:31,vars:6,consts:[[3,"ngSubmit","formGroup"],["class","modal-header",4,"ngIf"],[1,"modal-body"],[1,"mb-3"],[1,"form-label"],[1,"text-danger"],["formControlName","reference",3,"submitted"],["class","valid-feedback",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[1,"table-responsive"],[1,"table","table-bordered","table-striped"],[1,"table-dark"],["width","30%"],["width","20%"],["formArrayName","analysis"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"d-flex","justify-content-between","col-12"],["type","button","btnType","secondary","outline","",3,"click"],["type","submit","btnType","success","outline",""],[1,"modal-header"],[1,"modal-title"],["type","button","outline","","aria-label","Close",1,"btn-close",3,"click"],[1,"valid-feedback"],[1,"invalid-feedback"],[4,"ngIf"],[3,"formGroupName"],["type","text","formControlName","required",1,"form-control",3,"ngClass"],["type","text","formControlName","analyzed",1,"form-control",3,"ngClass"],["type","text","formControlName","conformity",1,"form-control",3,"ngClass"]],template:function(s,p){1&s&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return p.onSubmit()}),t.DNE(1,g,4,0,"div",1),t.j41(2,"div",2)(3,"div",3)(4,"label",4),t.EFF(5,"Refer\xeancia: "),t.j41(6,"span",5),t.EFF(7,"*"),t.k0s()(),t.nrm(8,"app-input-reference",6),t.DNE(9,C,2,0,"div",7)(10,j,2,1,"div",8),t.k0s(),t.j41(11,"div",9)(12,"table",10)(13,"thead",11)(14,"tr")(15,"th",12),t.EFF(16,"Nome:"),t.k0s(),t.j41(17,"th",13),t.EFF(18,"Exigido:"),t.k0s(),t.j41(19,"th",13),t.EFF(20,"Analisado:"),t.k0s(),t.j41(21,"th",13),t.EFF(22,"Conforme:"),t.k0s()()(),t.j41(23,"tbody",14),t.DNE(24,D,9,14,"tr",15),t.k0s()()()(),t.j41(25,"div",16)(26,"div",17)(27,"app-button",18),t.bIt("click",function(){return p.close()}),t.EFF(28," Cancelar "),t.k0s(),t.j41(29,"app-button",19),t.EFF(30," Salvar "),t.k0s()()()()),2&s&&(t.Y8G("formGroup",p.form),t.R7$(),t.Y8G("ngIf",p.loaded),t.R7$(7),t.Y8G("submitted",p.submitted),t.R7$(),t.Y8G("ngIf",p.isValid("referencia")),t.R7$(),t.Y8G("ngIf",p.isInvalid("referencia")),t.R7$(14),t.Y8G("ngForOf",p.analysisArray.controls))},dependencies:[i.YU,i.Sq,i.bT,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,c.$R,c.v8,A.Q,f.F],encapsulation:2})}}return r})(),P=(()=>{class r{constructor(e,s){this.service=e,this.activeModal=s,this.sent=new t.bkB}close(){this.activeModal.dismiss("cancel")}confirm(){this.service.delete(this.waterQuality.id).subscribe({next:()=>{this.close(),this.sent.emit()}})}static{this.\u0275fac=function(s){return new(s||r)(t.rXU(_),t.rXU(l.Lw))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-water-quality-delete"]],inputs:{waterQuality:"waterQuality"},outputs:{sent:"sent"},decls:20,vars:1,consts:[[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],[1,"text-danger","d-inline-block","remove-item-btn"],[1,"ri-delete-bin-5-fill","fs-48"],[1,"mt-4","pt-2","fs-15","mx-4","mx-sm-5"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["data-bs-dismiss","modal","id","deleteRecord-close",1,"btn","btn-link","link-success","fw-medium","text-decoration-none",3,"click"],[1,"ri-close-line","me-1","align-middle"],["type","button","id","delete-product",1,"btn","w-sm","btn-danger",3,"click"]],template:function(s,p){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"button",2),t.bIt("click",function(){return p.close()}),t.k0s()(),t.j41(3,"div",3)(4,"div",4)(5,"a",5),t.nrm(6,"i",6),t.k0s(),t.j41(7,"div",7)(8,"h4"),t.EFF(9,"Voc\xea est\xe1 certo que quer deletar isso ?"),t.k0s(),t.j41(10,"p",8),t.EFF(11,"Essa a\xe7\xe3o n\xe3o pode ser desfeita."),t.k0s(),t.j41(12,"p",8),t.EFF(13),t.k0s()()(),t.j41(14,"div",9)(15,"button",10),t.bIt("click",function(){return p.close()}),t.nrm(16,"i",11),t.EFF(17," Cancelar"),t.k0s(),t.j41(18,"button",12),t.bIt("click",function(){return p.confirm()}),t.EFF(19,"Sim, Eu quero deletar!"),t.k0s()()()()),2&s&&(t.R7$(13),t.JRh(p.waterQuality.reference))},encapsulation:2})}}return r})();var W=a(6356),V=a(7186),$=a(43);function U(r,v){if(1&r&&(t.j41(0,"td",10),t.EFF(1),t.k0s()),2&r){const e=t.XpG(2).$implicit;t.BMQ("rowspan",e.analysis.length),t.R7$(),t.JRh(e.reference)}}function Q(r,v){if(1&r){const e=t.RV6();t.j41(0,"td",10)(1,"button",13),t.bIt("click",function(){t.eBV(e);const p=t.XpG(2).$implicit,E=t.XpG(2);return t.Njj(E.delete(p))}),t.nrm(2,"i",14),t.k0s()()}if(2&r){const e=t.XpG(2).$implicit;t.BMQ("rowspan",e.analysis.length)}}function S(r,v){if(1&r&&(t.qex(0),t.j41(1,"tr"),t.DNE(2,U,2,2,"td",12),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.DNE(11,Q,3,1,"td",12),t.k0s(),t.bVm()),2&r){const e=v.$implicit,s=v.index;t.R7$(2),t.Y8G("ngIf",0==s),t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.analyzed),t.R7$(2),t.JRh(e.conformity),t.R7$(2),t.JRh(e.required),t.R7$(),t.Y8G("ngIf",0==s)}}function B(r,v){if(1&r&&(t.qex(0),t.DNE(1,S,12,6,"ng-container",11),t.bVm()),2&r){const e=v.$implicit;t.R7$(),t.Y8G("ngForOf",e.analysis)}}function x(r,v){if(1&r&&(t.j41(0,"app-card-body")(1,"div",6)(2,"table",7)(3,"thead")(4,"tr")(5,"th",8),t.EFF(6,"Refer\xeancias"),t.k0s(),t.j41(7,"th",9),t.EFF(8,"Parametro"),t.k0s(),t.j41(9,"th",8),t.EFF(10,"Exigido"),t.k0s(),t.j41(11,"th",8),t.EFF(12,"Analisado"),t.k0s(),t.j41(13,"th",8),t.EFF(14,"Conforme"),t.k0s(),t.j41(15,"th",10),t.EFF(16,"A\xe7\xf5es"),t.k0s()()(),t.j41(17,"tbody"),t.DNE(18,B,2,1,"ng-container",11),t.k0s()()()()),2&r){const e=t.XpG();t.R7$(18),t.Y8G("ngForOf",e.analises)}}const Y=[{path:"",component:(()=>{class r{constructor(e,s){this.service=e,this.modalService=s,this.analises=[],this.ready=!1}ngOnInit(){this.search()}search(){this.ready=!1,this.service.get().subscribe({next:e=>{this.analises=e,this.ready=!0},error:()=>{this.ready=!1}})}create(){this.openModal(N)}delete(e){this.openModal(P,{waterQuality:e})}openModal(e,s){const E=this.modalService.open(e,{centered:!0}).componentInstance;s&&Object.assign(E,s),E.sent.subscribe(()=>this.search())}static{this.\u0275fac=function(s){return new(s||r)(t.rXU(_),t.rXU(l.Bq))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-water-quality"]],decls:10,vars:1,consts:[[1,"row"],[1,"col-lg-12"],[1,"card-title","flex-grow-1","mb-0"],[1,"d-flex","gap-1","flex-wrap"],["btnType","success","outline","",3,"click"],[4,"ngIf"],[1,"table-responsive","table-card"],[1,"table","table-hover","table-striped","table-bordered","align-middle","table-nowrap","mb-0","table-gridjs"],[1,"col-1"],[1,"col-7"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"ri-delete-bin-5-fill"]],template:function(s,p){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"app-card")(3,"app-card-header")(4,"h5",2),t.EFF(5,"Coleta"),t.k0s(),t.j41(6,"div",3)(7,"app-button",4),t.bIt("click",function(){return p.create()}),t.EFF(8,"Adicionar"),t.k0s()()(),t.DNE(9,x,19,1,"app-card-body",5),t.k0s()()()),2&s&&(t.R7$(9),t.Y8G("ngIf",p.ready))},dependencies:[i.Sq,i.bT,A.Q,W.i,V.l,$.q],encapsulation:2})}}return r})()}];let w=(()=>{class r{static{this.\u0275fac=function(s){return new(s||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[M.iI.forChild(Y),M.iI]})}}return r})(),J=(()=>{class r{static{this.\u0275fac=function(s){return new(s||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({providers:[_],imports:[o.M.pick(u.Wzl),i.MD,w,h.G,y.h,c.X1,l.c9,d.i,c.YN,n.H]})}}return r})()}}]);