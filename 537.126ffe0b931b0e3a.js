"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[537],{6537:(H,h,s)=>{s.r(h),s.d(h,{LinkModule:()=>J});var c=s(177),l=s(9417),m=s(9005),_=s(8147),k=s(5464),v=s(6411),C=s(115),b=s(3887),F=s(6354),y=s(5312);class d{constructor(r,e,i,n,a){this.id=r,this.number=e,this.letter=i,this.address=n,this.has_hydrometer=a}get name(){return`${this.address}: ${this.number}-${this.letter}`}static fromJson(r){return new d(r.id,r.number,r.letter,r.address,r.has_hydrometer)}}class u{constructor(r,e,i,n,a,p,w,z){this.id=r,this.number=e,this.category=i,this.customer=n,this.place=a,this.total=p,this.exclusive_member=w,this.active=z}static fromJson(r){return new u(r.id,r.number,r.category,r.customer,d.fromJson(r.place),r.total,r.exclusive_member,r.active)}}var t=s(4438),j=s(1626);let g=(()=>{class o{constructor(e){this.http=e,this.apiUrl=`${y.c.apiUrl}/link`}paginate(e){return this.http.post(`${this.apiUrl}/paginate`,e).pipe((0,F.T)(i=>(i.content=i.content.map(n=>u.fromJson(n)),i)))}create(e){return this.http.post(this.apiUrl,e)}update(e){return this.http.put(this.apiUrl,e)}delete(e){return this.http.delete(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(i){return new(i||o)(t.KVO(j.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var f=s(1188),T=s(9830);let M=(()=>{class o{constructor(){this.value="",this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this.value=e||""}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onChangeValue(e){this.value=e,this.onChange(e)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["monetary"]],features:[t.Jv_([{provide:l.kq,useExisting:(0,t.Rfq)(()=>o),multi:!0}])],decls:1,vars:2,consts:[["type","text","mask","separator.2","thousandSeparator",".","decimalMarker",",",1,"form-control",3,"ngModelChange","blur","dropSpecialCharacters","ngModel"]],template:function(i,n){1&i&&(t.j41(0,"input",0),t.bIt("ngModelChange",function(p){return n.onChangeValue(p)})("blur",function(){return n.onTouched()}),t.k0s()),2&i&&t.Y8G("dropSpecialCharacters",!1)("ngModel",n.value)},dependencies:[l.me,l.BC,l.vS,T.Zr],encapsulation:2})}}return o})();var R=s(9459),x=s(6356),G=s(7186),I=s(43);const E=["*"];let V=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-card-footer"]],ngContentSelectors:E,decls:2,vars:0,consts:[[1,"card-footer"]],template:function(i,n){1&i&&(t.NAR(),t.j41(0,"div",0),t.SdG(1),t.k0s())},encapsulation:2})}}return o})();var B=s(6271),L=s(922);function $(o,r){if(1&o&&(t.j41(0,"option",1),t.EFF(1),t.k0s()),2&o){const e=r.$implicit;t.Y8G("ngValue",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function N(o,r){if(1&o&&(t.qex(0),t.j41(1,"optgroup",3),t.nI1(2,"group"),t.DNE(3,$,2,2,"option",4),t.k0s(),t.bVm()),2&o){const e=r.$implicit;t.R7$(),t.Y8G("label",t.bMT(2,2,e.group)),t.R7$(2),t.Y8G("ngForOf",e.categories)}}let S=(()=>{class o{constructor(e){this.service=e,this.disabled=!1,this.groups=[],this.value=null,this.onChange=()=>{},this.onTouch=()=>{},this.loading()}loading(){this.service.get().subscribe({next:e=>{this.groups=this.buildGroups(e)}})}buildGroups(e){return Array.from(new Set(e.map(i=>i.group))).sort((i,n)=>i.localeCompare(n)).map(i=>({group:i,categories:e.filter(n=>n.group===i).sort((n,a)=>n.name.localeCompare(a.name))}))}writeValue(e){this.value=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouch=e}setDisabledState(e){this.disabled=e}onSelectionChange(e){this.value=e,this.onChange(e),this.onTouch()}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(B.M))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-category-select"]],inputs:{disabled:"disabled"},features:[t.Jv_([{provide:l.kq,useExisting:(0,t.Rfq)(()=>o),multi:!0}])],decls:4,vars:4,consts:[[1,"form-select",3,"ngModelChange","disabled","ngModel"],[3,"ngValue"],[4,"ngFor","ngForOf"],[3,"label"],[3,"ngValue",4,"ngFor","ngForOf"]],template:function(i,n){1&i&&(t.j41(0,"select",0),t.bIt("ngModelChange",function(p){return n.onSelectionChange(p)}),t.j41(1,"option",1),t.EFF(2,"Selecione..."),t.k0s(),t.DNE(3,N,4,4,"ng-container",2),t.k0s()),2&i&&(t.Y8G("disabled",n.disabled)("ngModel",n.value),t.R7$(),t.Y8G("ngValue",null),t.R7$(2),t.Y8G("ngForOf",n.groups))},dependencies:[c.Sq,l.xH,l.y7,l.wz,l.BC,l.vS,L.c],encapsulation:2})}}return o})();function X(o,r){if(1&o){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.nI1(11,"currency"),t.k0s(),t.j41(12,"td",23)(13,"ul",24)(14,"li",25)(15,"a",26),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.delete(n))}),t.nrm(16,"i",27),t.k0s()()()()()}if(2&o){const e=r.$implicit;t.R7$(2),t.JRh(e.customer.name),t.R7$(2),t.JRh(e.category.name),t.R7$(2),t.JRh(e.place.address),t.R7$(2),t.JRh(e.place.number+e.place.letter),t.R7$(2),t.JRh(t.i5U(11,5,e.total,"BRL"))}}function Y(o,r){if(1&o){const e=t.RV6();t.j41(0,"div",8)(1,"table",9)(2,"thead",10)(3,"tr")(4,"th",11),t.EFF(5,"Nome"),t.k0s(),t.j41(6,"th",11),t.EFF(7,"Categoria"),t.k0s(),t.j41(8,"th",12),t.EFF(9,"Local"),t.k0s(),t.j41(10,"th",12),t.EFF(11,"Numero"),t.k0s(),t.j41(12,"th",13),t.EFF(13,"Valor"),t.k0s(),t.j41(14,"th",14),t.EFF(15,"A\xe7\xf5es"),t.k0s()()(),t.j41(16,"thead",10)(17,"tr")(18,"th")(19,"input",15),t.mxI("ngModelChange",function(n){t.eBV(e);const a=t.XpG();return t.DH7(a.filter.name,n)||(a.filter.name=n),t.Njj(n)}),t.bIt("keydown.enter",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.search())}),t.k0s()(),t.j41(20,"th")(21,"app-category-select",16),t.mxI("ngModelChange",function(n){t.eBV(e);const a=t.XpG();return t.DH7(a.filter.category,n)||(a.filter.category=n),t.Njj(n)}),t.bIt("change",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.search())}),t.k0s()(),t.j41(22,"th")(23,"input",15),t.mxI("ngModelChange",function(n){t.eBV(e);const a=t.XpG();return t.DH7(a.filter.address,n)||(a.filter.address=n),t.Njj(n)}),t.bIt("keydown.enter",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.search())}),t.k0s()(),t.j41(24,"th"),t.EFF(25,"Numero"),t.k0s(),t.j41(26,"th")(27,"monetary",17),t.mxI("ngModelChange",function(n){t.eBV(e);const a=t.XpG();return t.DH7(a.filter.total,n)||(a.filter.total=n),t.Njj(n)}),t.bIt("keydown.enter",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.search())}),t.k0s()(),t.j41(28,"th")(29,"div",18)(30,"button",19),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.search())}),t.nrm(31,"i",20),t.EFF(32," Buscar"),t.k0s()()()()(),t.j41(33,"tbody",21),t.DNE(34,X,17,8,"tr",22),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(19),t.R50("ngModel",e.filter.name),t.R7$(2),t.R50("ngModel",e.filter.category),t.R7$(2),t.R50("ngModel",e.filter.address),t.R7$(4),t.R50("ngModel",e.filter.total),t.R7$(7),t.Y8G("ngForOf",e.page.content)("ngForTrackBy",e.trackById)}}function U(o,r){if(1&o){const e=t.RV6();t.j41(0,"div",28)(1,"div"),t.EFF(2," itens por pagina: "),t.j41(3,"select",29),t.mxI("ngModelChange",function(n){t.eBV(e);const a=t.XpG();return t.DH7(a.filter.size,n)||(a.filter.size=n),t.Njj(n)}),t.bIt("change",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.search())}),t.j41(4,"option",30),t.EFF(5,"10"),t.k0s(),t.j41(6,"option",31),t.EFF(7,"50"),t.k0s(),t.j41(8,"option",32),t.EFF(9,"100"),t.k0s()(),t.j41(10,"div",33),t.EFF(11),t.k0s()(),t.j41(12,"div")(13,"app-button",34),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadPage(0))}),t.nrm(14,"i",35),t.EFF(15,"Primeira "),t.k0s(),t.j41(16,"app-button",34),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadPage(n.page.number-1))}),t.nrm(17,"i",36),t.EFF(18,"Anterior "),t.k0s(),t.j41(19,"app-button",37),t.nrm(20,"i",38),t.EFF(21),t.k0s(),t.j41(22,"app-button",34),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadPage(n.page.number+1))}),t.nrm(23,"i",39),t.EFF(24," Pr\xf3xima "),t.k0s(),t.j41(25,"app-button",34),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadPage(n.page.total_pages-1))}),t.nrm(26,"i",40),t.EFF(27," Ultima "),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(3),t.R50("ngModel",e.filter.size),t.R7$(8),t.Lme("P\xe1gina ",e.page.number+1," de ",e.page.total_pages,""),t.R7$(2),t.Y8G("disabled",e.page.first),t.R7$(3),t.Y8G("disabled",e.page.first),t.R7$(3),t.Y8G("disabled",!0),t.R7$(2),t.SpI(" ",e.page.number+1," "),t.R7$(),t.Y8G("disabled",e.page.last),t.R7$(3),t.Y8G("disabled",e.page.last)}}const D=[{path:"",component:(()=>{class o{constructor(e,i){this.service=e,this.modalService=i,this.page=null,this.filter={category:null,page:0,size:20,sort_orders:[{property:"customer.normalizedName",direction:"ASC"}]},this.loading=!0}ngOnInit(){this.search()}search(){this.loading=!0,this.service.paginate(this.filter).subscribe({next:e=>{this.page=e,this.loading=!1},error:()=>{this.loading=!1}})}trackById(e,i){return i.id}loadPage(e){this.page&&(e<0||e>=this.page.total_pages||(this.filter.page=e,this.search()))}create(){}delete(e){}edit(e){}openModal(e,i){const n=this.modalService.open(e,{centered:!0}).componentInstance;i&&Object.assign(n,i),n.sent.subscribe(()=>this.search())}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(g),t.rXU(m.Bq))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-link"]],decls:14,vars:2,consts:[[1,"row"],[1,"col-lg-12"],[1,"card-title","flex-grow-1","mb-0"],[1,"d-flex","gap-1","flex-wrap"],["btnType","success","outline","",3,"click"],[1,"ri-add-line","me-1"],["class","table-responsive table-card",4,"ngIf"],["class","d-flex justify-content-between align-items-center mt-3",4,"ngIf"],[1,"table-responsive","table-card"],[1,"table","table-hover","align-middle","table-nowrap","mb-0","table-gridjs"],[1,"table-light"],[1,"col-3"],[1,"col-2"],[1,"col-1"],[1,"col-1","text-center"],["type","text","placeholder","Name:",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],[3,"ngModelChange","change","ngModel"],["type","text","placeholder","Valor:",3,"ngModelChange","keydown.enter","ngModel"],[1,"d-grid","gap-2"],["outline","","type","button",1,"btn","btn-outline-primary",3,"click"],[1,"mdi-search-webt"],[1,"list","form-check-all"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-center"],[1,"list-inline","hstack","gap-2","mb-0","justify-content-center"],[1,"list-inline-item"],["ngbTooltip","Remover","placement","top",1,"text-danger",3,"click"],[1,"ri-delete-bin-5-fill","fs-16"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value","10","selected",""],["value","50","selected",""],["value","100","selected",""],[1,"text-muted"],["btnType","primary","outline","",3,"click","disabled"],[1,"mdi","mdi-chevron-double-left"],[1,"mdi","mdi-chevron-left"],["btnType","primary","outline","",3,"disabled"],[1,"mdi","mdi-cellphone-link"],[1,"mdi","mdi-chevron-right"],[1,"mdi","mdi-chevron-double-right"]],template:function(i,n){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"app-card")(3,"app-card-header")(4,"h5",2),t.EFF(5,"Liga\xe7\xf5es"),t.k0s(),t.j41(6,"div",3)(7,"app-button",4),t.bIt("click",function(){return n.create()}),t.nrm(8,"i",5),t.EFF(9," Adicionar "),t.k0s()()(),t.j41(10,"app-card-body"),t.DNE(11,Y,35,6,"div",6),t.k0s(),t.j41(12,"app-card-footer"),t.DNE(13,U,28,9,"div",7),t.k0s()()()()),2&i&&(t.R7$(11),t.Y8G("ngIf",n.page),t.R7$(2),t.Y8G("ngIf",n.page))},dependencies:[l.xH,l.y7,l.me,l.wz,l.BC,l.vS,c.Sq,c.bT,M,R.Q,x.i,G.l,I.q,V,S,c.oe],encapsulation:2})}}return o})()}];let O=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[f.iI.forChild(D),f.iI]})}}return o})(),J=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({providers:[g],imports:[l.YN,l.X1,O,k.M.pick(v.Wzl),m.c9,c.MD,b.G,_.h,C.i]})}}return o})()}}]);