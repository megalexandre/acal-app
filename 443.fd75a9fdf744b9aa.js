"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[443],{272:(j,f,s)=>{s.d(f,{R:()=>g});var r=s(4438);const l=["*"];let g=(()=>{class v{static{this.\u0275fac=function(F){return new(F||v)}}static{this.\u0275cmp=r.VBU({type:v,selectors:[["app-card-footer"]],ngContentSelectors:l,decls:2,vars:0,consts:[[1,"card-footer"]],template:function(F,c){1&F&&(r.NAR(),r.j41(0,"div",0),r.SdG(1),r.k0s())},encapsulation:2})}}return v})()},1272:(j,f,s)=>{s.d(f,{e:()=>E});var r=s(4438),l=s(177),g=s(9459);function v(m,F){if(1&m){const c=r.RV6();r.j41(0,"div",1)(1,"div",2)(2,"div")(3,"strong"),r.EFF(4,"Total:"),r.k0s(),r.EFF(5),r.j41(6,"strong"),r.EFF(7,"P\xe1gina:"),r.k0s(),r.EFF(8),r.j41(9,"strong"),r.EFF(10,"Exibindo:"),r.k0s(),r.EFF(11),r.k0s()(),r.j41(12,"div",3)(13,"div",4)(14,"app-button",5),r.bIt("click",function(){r.eBV(c);const u=r.XpG();return r.Njj(u.goToPage(0))}),r.nrm(15,"i",6),r.EFF(16," Primeira "),r.k0s(),r.j41(17,"app-button",5),r.bIt("click",function(){r.eBV(c);const u=r.XpG();return r.Njj(u.goToPage(u.currentPage-1))}),r.nrm(18,"i",7),r.EFF(19," Anterior "),r.k0s(),r.j41(20,"app-button",8),r.nrm(21,"i",9),r.EFF(22),r.k0s(),r.j41(23,"app-button",5),r.bIt("click",function(){r.eBV(c);const u=r.XpG();return r.Njj(u.goToPage(u.currentPage+1))}),r.nrm(24,"i",10),r.EFF(25," Pr\xf3xima "),r.k0s(),r.j41(26,"app-button",5),r.bIt("click",function(){r.eBV(c);const u=r.XpG();return r.Njj(u.goToPage(u.totalPages-1))}),r.nrm(27,"i",11),r.EFF(28," \xdaltima "),r.k0s()()()()}if(2&m){const c=r.XpG();r.R7$(5),r.SpI(" ",c.page.total_elements," registros | "),r.R7$(3),r.Lme(" ",c.page.number+1," de ",c.page.total_pages," | "),r.R7$(3),r.SpI(" ",c.page.number_of_elements," itens"),r.R7$(3),r.Y8G("disabled",c.isFirstPage()),r.R7$(3),r.Y8G("disabled",c.isFirstPage()),r.R7$(3),r.Y8G("disabled",!0),r.R7$(2),r.SpI(" ",c.currentPage+1," "),r.R7$(),r.Y8G("disabled",c.isLastPage()),r.R7$(3),r.Y8G("disabled",c.isLastPage())}}let E=(()=>{class m{constructor(){this.page=null,this.pageChange=new r.bkB}get currentPage(){return this.page?.number||0}get totalPages(){return this.page?.total_pages||0}isFirstPage(){return!!this.page&&this.page.first}isLastPage(){return!this.page||this.page.last}goToPage(c){c>=0&&c<this.totalPages&&this.pageChange.emit(c)}static{this.\u0275fac=function(h){return new(h||m)}}static{this.\u0275cmp=r.VBU({type:m,selectors:[["app-pagination"]],inputs:{page:"page"},outputs:{pageChange:"pageChange"},decls:1,vars:1,consts:[["class","d-flex flex-wrap justify-content-between align-items-center",4,"ngIf"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center"],[1,"mb-2"],[1,"d-flex","gap-2","flex-wrap"],[1,"d-flex","gap-2","align-items-center","justify-content-end","pt-2","flex-wrap"],["btnType","primary","outline","",3,"click","disabled"],[1,"mdi","mdi-chevron-double-left"],[1,"mdi","mdi-chevron-left"],["btnType","primary","outline","",3,"disabled"],[1,"mdi","mdi-cellphone-link"],[1,"mdi","mdi-chevron-right"],[1,"mdi","mdi-chevron-double-right"]],template:function(h,u){1&h&&r.DNE(0,v,29,10,"div",0),2&h&&r.Y8G("ngIf",u.page)},dependencies:[l.bT,g.Q],encapsulation:2})}}return m})()},2443:(j,f,s)=>{s.r(f),s.d(f,{InvoiceModule:()=>ce});var r=s(177),l=s(9417),g=s(9005),v=s(8147),E=s(5464),m=s(6411),F=s(1022),c=s(255),h=s(115),u=s(3887),V=s(1114),b=s(1188),e=s(4438),x=s(5312),$=s(1626);let C=(()=>{class o{constructor(t){this.http=t,this.apiUrl=`${x.c.apiUrl}/invoice`}get(){return this.http.get(this.apiUrl)}paginate(t){return this.http.post(`${this.apiUrl}/paginate`,t)}create(t){return this.http.post(`${this.apiUrl}/all`,t)}update(t){return this.http.put(this.apiUrl,t)}delete(t){return this.http.delete(`${this.apiUrl}/${t}`)}preview(t){return this.http.get(`${this.apiUrl}/preview/${t}`)}static{this.\u0275fac=function(n){return new(n||o)(e.KVO($.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var w=s(7509),D=s(9459),I=s(6356),M=s(7186),R=s(43),G=s(272),B=s(9986),N=s(1272);function P(o,d){if(1&o){const t=e.RV6();e.j41(0,"tr",9),e.bIt("dblclick",function(){const i=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.onDoubleClick(i))}),e.j41(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.nI1(13,"currency"),e.k0s(),e.j41(14,"td",10)(15,"ul",11)(16,"li",12),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.edit(i))}),e.nrm(17,"i",13),e.k0s(),e.j41(18,"li",14),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.delete(i))}),e.j41(19,"a",15),e.nrm(20,"i",16),e.k0s()()()()()}if(2&o){const t=d.$implicit;e.R7$(2),e.JRh(t.reference),e.R7$(2),e.JRh(t.due_date),e.R7$(2),e.JRh(t.place.address),e.R7$(2),e.JRh(t.customer.name),e.R7$(2),e.JRh(t.category.name),e.R7$(2),e.JRh(e.bMT(13,6,t.total))}}let S=(()=>{class o{constructor(t,n,i,a,p){this.router=t,this.route=n,this.invoiceService=i,this.modalService=a,this.toastService=p,this.filter={page:0,size:10,sort_orders:[{property:"created_at",direction:"DESC"}]},this.loading=!0}ngOnInit(){this.search()}search(){this.loading=!0,this.invoiceService.paginate(this.filter).subscribe({next:t=>{this.page=t,this.loading=!1},error:()=>{this.loading=!1}})}onPageChange(t){this.filter.page=t-1,this.search()}onDoubleClick(t){this.view(t)}view(t){this.router.navigate(["view"],{relativeTo:this.route,state:{invoice:t}})}create(){this.router.navigate(["create"],{relativeTo:this.route})}edit(t){}delete(t){}openModal(t,n){const a=this.modalService.open(t,{centered:!0}).componentInstance;n&&Object.assign(a,n),a.sent.subscribe(()=>this.search())}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(b.Ix),e.rXU(b.nX),e.rXU(C),e.rXU(g.Bq),e.rXU(w.f))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-invoice"]],decls:31,vars:2,consts:[[1,"row"],[1,"col-lg-12"],[1,"card-title","flex-grow-1","mb-0"],[1,"d-flex","gap-1","flex-wrap"],["btnType","success","outline","",3,"click"],["table-header","",1,"table-light"],["table-body","",1,"list","form-check-all"],[3,"dblclick",4,"ngFor","ngForOf"],[3,"pageChange","page"],[3,"dblclick"],[1,"text-center"],[1,"list-inline","hstack","gap-2","mb-0"],["data-bs-toggle","tooltip","data-bs-trigger","hover","ngbTooltip","Edit","placement","top",1,"list-inline-item","edit",3,"click"],[1,"ri-pencil-fill","fs-16"],["ngbTooltip","Remove","placement","top","data-bs-toggle","tooltip","data-bs-trigger","hover",1,"list-inline-item","me-0",3,"click"],[1,"text-danger","d-inline-block","remove-item-btn"],[1,"ri-delete-bin-5-fill","fs-16"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"app-card")(3,"app-card-header")(4,"h5",2),e.EFF(5,"Faturas"),e.k0s(),e.j41(6,"div",3)(7,"app-button",4),e.bIt("click",function(){return i.create()}),e.EFF(8," Adicionar "),e.k0s()()(),e.j41(9,"app-card-body")(10,"app-table")(11,"thead",5)(12,"tr")(13,"th"),e.EFF(14,"Refererencia"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Vencimento"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Endere\xe7o"),e.k0s(),e.j41(19,"th"),e.EFF(20,"Cliente"),e.k0s(),e.j41(21,"th"),e.EFF(22,"Categoria"),e.k0s(),e.j41(23,"th"),e.EFF(24,"Total"),e.k0s(),e.j41(25,"th"),e.EFF(26,"A\xe7\xf5es"),e.k0s()()(),e.j41(27,"tbody",6),e.DNE(28,P,21,8,"tr",7),e.k0s()()(),e.j41(29,"app-card-footer")(30,"app-pagination",8),e.bIt("pageChange",function(p){return i.onPageChange(p)}),e.k0s()()()()()),2&n&&(e.R7$(28),e.Y8G("ngForOf",i.page.content),e.R7$(2),e.Y8G("page",i.page))},dependencies:[r.Sq,D.Q,I.i,M.l,R.q,G.R,B.O,N.e,r.oe],encapsulation:2})}}return o})();class y{static valid(){return d=>{const t=d.value;if(!t||8!==t.length)return{invalidFormat:!0};const n=parseInt(t.substring(0,4),10),i=parseInt(t.substring(4,6),10),a=parseInt(t.substring(6,8),10);if(isNaN(n)||isNaN(i)||isNaN(a))return{invalidCharacters:!0};if(n<1900||n>2100)return{invalidYear:!0};const p=new Date(n,i-1,a);return p.getFullYear()===n&&p.getMonth()===i-1&&p.getDate()===a?null:{invalidDate:!0}}}}var A=s(9830);function O(o,d){1&o&&(e.j41(0,"div",2),e.EFF(1,"Data inv\xe1lida"),e.k0s())}let Y=(()=>{class o{constructor(){this.placeholder="YYYY-MM-DD",this.reference=new l.MJ("",[l.k0.required,y.valid()]),this.onChange=()=>{},this.onTouched=()=>{}}ngOnChanges(t){t.submitted&&!0===t.submitted.currentValue&&!0!==t.submitted.previousValue&&(this.reference.markAsTouched(),this.reference.updateValueAndValidity({onlySelf:!0,emitEvent:!1}))}writeValue(t){if(!t)return void this.reference.setValue("",{emitEvent:!1});const n=t instanceof Date?t.toISOString().substring(0,10):t;this.reference.setValue(n,{emitEvent:!1})}registerOnChange(t){this.onChange=t,this.reference.valueChanges.subscribe(n=>{if(!n)return void this.onChange(null);const i=n.split("-");if(3===i.length){const[a,p,_]=i.map(Number),k=new Date(a,p-1,_);this.onChange(k)}else this.onChange(null)})}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.reference.disable():this.reference.enable()}validate(t){const n=[l.k0.required,y.valid()],i=l.k0.compose(n);return i?i(t):null}isInvalid(){return!!this.submitted&&this.reference.touched&&this.reference.invalid}isValid(){return!!this.submitted&&this.reference.touched&&this.reference.valid}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-input-date"]],inputs:{submitted:"submitted",placeholder:"placeholder"},features:[e.Jv_([{provide:l.kq,useExisting:(0,e.Rfq)(()=>o),multi:!0},{provide:l.cz,useExisting:(0,e.Rfq)(()=>o),multi:!0}]),e.OA$],decls:2,vars:4,consts:[["type","text","mask","0000-00-00",1,"form-control",3,"dropSpecialCharacters","formControl","placeholder"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(n,i){1&n&&(e.nrm(0,"input",0),e.DNE(1,O,2,0,"div",1)),2&n&&(e.Y8G("dropSpecialCharacters",!1)("formControl",i.reference)("placeholder",i.placeholder),e.R7$(),e.Y8G("ngIf",i.isInvalid()))},dependencies:[r.bT,l.me,l.BC,l.l_,A.Zr],encapsulation:2})}}return o})();var U=s(9743);const T=o=>({"table-success":o});function X(o,d){if(1&o){const t=e.RV6();e.j41(0,"app-card")(1,"app-card-body")(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),e.EFF(6,"Refer\xeancia"),e.k0s(),e.j41(7,"app-input-reference",6),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.reference,i)||(a.reference=i),e.Njj(i)}),e.k0s()()(),e.nrm(8,"hr"),e.j41(9,"div",7)(10,"div",8)(11,"label",9),e.EFF(12,"Buscar"),e.k0s(),e.j41(13,"button",10),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.search())}),e.nrm(14,"i",11),e.EFF(15," Buscar"),e.k0s()()()()()()}if(2&o){const t=e.XpG();e.R7$(7),e.R50("ngModel",t.reference)}}function J(o,d){if(1&o&&(e.j41(0,"option",19),e.EFF(1),e.k0s()),2&o){const t=d.$implicit;e.Y8G("ngValue",t),e.R7$(),e.JRh(t)}}function L(o,d){if(1&o&&(e.j41(0,"option",19),e.EFF(1),e.k0s()),2&o){const t=d.$implicit;e.Y8G("ngValue",t),e.R7$(),e.JRh(t)}}function H(o,d){if(1&o){const t=e.RV6();e.j41(0,"tr",42),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.checked=!i.checked)}),e.j41(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.nI1(9,"currency"),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td",43),e.EFF(13),e.nI1(14,"currency"),e.k0s()()}if(2&o){const t=d.$implicit;e.Y8G("ngClass",e.eq3(11,T,t.checked)),e.R7$(2),e.JRh(t.place.number),e.R7$(2),e.JRh(t.customer.name),e.R7$(2),e.JRh(t.category.name),e.R7$(2),e.JRh(e.bMT(9,7,t.water_value)),e.R7$(3),e.JRh(t.consumption),e.R7$(2),e.JRh(e.bMT(14,9,t.total))}}function z(o,d){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"tr",38),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.toggleGroup(i))}),e.j41(2,"td",39)(3,"div",7)(4,"div",40),e.EFF(5),e.k0s()()()(),e.DNE(6,H,15,13,"tr",41),e.bVm()}if(2&o){const t=d.$implicit,n=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.eq3(4,T,t.checked)),e.R7$(4),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngForOf",t.items)("ngForTrackBy",n.trackBySelectableId)}}function W(o,d){if(1&o){const t=e.RV6();e.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16)(5,"div",7)(6,"div",17)(7,"label",5),e.EFF(8,"Categorias:"),e.k0s(),e.j41(9,"select",18),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.filter.category,i)||(a.filter.category=i),e.Njj(i)}),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onchangeFilter())}),e.j41(10,"option",19),e.EFF(11,"Selecione..."),e.k0s(),e.DNE(12,J,2,2,"option",20),e.k0s()(),e.j41(13,"div",17)(14,"label",5),e.EFF(15,"Logradouro:"),e.k0s(),e.j41(16,"select",18),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.filter.address,i)||(a.filter.address=i),e.Njj(i)}),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onchangeFilter())}),e.j41(17,"option",19),e.EFF(18,"Selecione..."),e.k0s(),e.DNE(19,L,2,2,"option",20),e.k0s()(),e.j41(20,"div",17)(21,"label",5),e.EFF(22,"Tem Hidr\xf4metro?:"),e.k0s(),e.j41(23,"select",21),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.filter.hasMeter,i)||(a.filter.hasMeter=i),e.Njj(i)}),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onchangeFilter())}),e.j41(24,"option",19),e.EFF(25,"Selecione..."),e.k0s(),e.j41(26,"option",19),e.EFF(27,"Sim"),e.k0s(),e.j41(28,"option",19),e.EFF(29,"N\xe3o"),e.k0s()()()()()()()(),e.j41(30,"div",22)(31,"div",23)(32,"div",24)(33,"table",25)(34,"thead",26)(35,"tr",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleAll())}),e.j41(36,"th",28),e.EFF(37,"N\xfamero"),e.k0s(),e.j41(38,"th",29),e.EFF(39,"Categoria"),e.k0s(),e.j41(40,"th",30),e.EFF(41,"Name"),e.k0s(),e.j41(42,"th",31),e.EFF(43,"\xc1gua/lt"),e.k0s(),e.j41(44,"th",31),e.EFF(45,"\xc1gua/Consumo"),e.k0s(),e.j41(46,"th",32),e.EFF(47,"Valor"),e.k0s()()(),e.j41(48,"tbody",33),e.DNE(49,z,7,6,"ng-container",34),e.k0s()()()()(),e.j41(50,"div",35)(51,"div",14)(52,"app-card")(53,"app-card-body")(54,"div",7)(55,"div",36),e.EFF(56),e.k0s(),e.j41(57,"div",36),e.EFF(58),e.nI1(59,"currency"),e.k0s(),e.j41(60,"div",36),e.EFF(61),e.k0s(),e.j41(62,"div",36),e.EFF(63),e.nI1(64,"currency"),e.k0s()()(),e.j41(65,"app-card-body")(66,"div",2)(67,"div",7)(68,"div",37)(69,"app-input-date",6),e.mxI("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.DH7(a.dueDate,i)||(a.dueDate=i),e.Njj(i)}),e.k0s()()(),e.j41(70,"div",7)(71,"div",37)(72,"button",10),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.confirm())}),e.EFF(73,"Confirmar"),e.k0s()()()()()()()()()}if(2&o){const t=e.XpG();e.R7$(9),e.R50("ngModel",t.filter.category),e.R7$(),e.Y8G("ngValue",null),e.R7$(2),e.Y8G("ngForOf",t.categories),e.R7$(4),e.R50("ngModel",t.filter.address),e.R7$(),e.Y8G("ngValue",null),e.R7$(2),e.Y8G("ngForOf",t.addresses),e.R7$(4),e.R50("ngModel",t.filter.hasMeter),e.R7$(),e.Y8G("ngValue",null),e.R7$(2),e.Y8G("ngValue",!0),e.R7$(2),e.Y8G("ngValue",!1),e.R7$(21),e.Y8G("ngForOf",t.preview.items)("ngForTrackBy",t.trackByGroupId),e.R7$(7),e.SpI("Total de items: ",t.totalItems(),""),e.R7$(2),e.SpI("Valor Total: ",e.bMT(59,17,t.totalValue()),""),e.R7$(3),e.SpI("Items Selecionados: ",t.totalISelectedtems(),""),e.R7$(2),e.SpI("Valor Selecionado: ",e.bMT(64,19,t.totalSelectedValue()),""),e.R7$(6),e.R50("ngModel",t.dueDate)}}let Q=(()=>{class o{constructor(t){this.service=t,this.reference=null,this.dueDate=null,this.preview={items:[]},this.loading=!0,this.invoices=[],this.addresses=[],this.categories=[],this.filter={hasMeter:null,address:null,category:null}}ngOnInit(){}search(){this.loading=!0,this.reference&&this.service.preview(this.reference).subscribe({next:t=>{this.invoices=t,this.preview=this.buildPreview(t),this.loading=!1},error:()=>{this.loading=!1,this.preview.items=[]}})}confirm(){const t=this.preview.items.flatMap(n=>n.items).filter(n=>n.checked);t.forEach(n=>{n.due_date=this.dueDate}),this.service.create(t).subscribe({next:n=>{this.preview.items=this.preview.items.map(i=>({...i,items:i.items.filter(a=>!a.checked)}))},error:()=>{}})}filterByHasMeter(t){return null===this.filter.hasMeter?t:t.filter(n=>n.category.is_hydrometer===this.filter.hasMeter)}filterByAddress(t){return this.filter.address?t.filter(n=>n.place.name===this.filter.address):t}filterByCategory(t){return this.filter.category?t.filter(n=>n.category.name===this.filter.category):t}onchangeFilter(){let t=[...this.invoices];t=this.filterByHasMeter(t),t=this.filterByAddress(t),t=this.filterByCategory(t),this.preview=this.buildPreview(t)}getUniqueAddresses(t){return Array.from(new Set(t.map(n=>n.place.name))).sort((n,i)=>n.localeCompare(i))}getUniqueCategories(t){return Array.from(new Set(t.map(n=>n.category.name))).sort((n,i)=>n.localeCompare(i))}createSelectableInvoices(t){return t.map(n=>({checked:!1,...n}))}buildPreview(t){const n=this.createSelectableInvoices(t),i=this.getUniqueAddresses(n),a=this.getUniqueCategories(n),p=i.map(_=>({name:_,checked:!1,items:n.filter(k=>k.place.name===_)}));return 0===this.addresses.length&&(this.addresses=i),0===this.categories.length&&(this.categories=a),{items:p}}trackByGroupId(t){return t.id}trackBySelectableId(t){return t.id}totalItems(){return this.preview.items.reduce((t,n)=>t+n.items.length,0)}totalValue(){return this.preview.items.reduce((t,n)=>t+n.items.reduce((i,a)=>i+Number(a.total),0),0)}totalISelectedtems(){return this.preview.items.reduce((t,n)=>t+n.items.filter(i=>i.checked).length,0)}totalSelectedValue(){return this.preview.items.reduce((t,n)=>t+n.items.filter(i=>i.checked).reduce((i,a)=>i+(Number(a.total)??0),0),0)}toggleGroup(t){t.checked=!t.checked,t.items.forEach(n=>n.checked=t.checked)}toggleAll(){const t=this.preview.items.every(n=>n.checked&&n.items.every(i=>i.checked));this.preview.items.forEach(n=>{n.checked=!t,n.items.forEach(i=>i.checked=!t)})}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(C))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-invoice-create"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","d-flex flex-column","style","height: 100vh",4,"ngIf"],[1,"container-fluid"],[1,"row","g-2","align-items-end"],[1,"col-md-6","col-12"],[1,"form-label"],[3,"ngModelChange","ngModel"],[1,"row"],[1,"col-12","col-md-4","offset-md-8","d-grid"],[1,"form-label","invisible"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"mdi","mdi-magnify"],[1,"d-flex","flex-column",2,"height","100vh"],[2,"height","10vh"],[1,"border","h-100"],[1,"card"],[1,"card-body"],[1,"col-xxl-4","col-md-6"],["id","group",1,"form-select",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["id","hasMeterFilter",1,"form-select",3,"ngModelChange","change","ngModel"],[2,"height","60vh"],[1,"border","h-100","d-flex","flex-column"],[1,"border","mb-0","flex-grow-1","overflow-auto"],[1,"table","table-hover","table-bordered","table-striped","mb-0",2,"min-width","100%"],[1,"table-light",2,"position","sticky","top","0","z-index","1"],[2,"cursor","pointer",3,"click"],[2,"width","5%"],[2,"width","20%"],[2,"width","35%"],[2,"width","10%"],[1,"text-center",2,"width","10%"],["table-body","",1,"list","form-check-all"],[4,"ngFor","ngForOf","ngForTrackBy"],[2,"height","20vh"],[1,"col-md-3","col-12"],[1,"col-12","col-md-3","offset-md-9","d-grid"],[1,"bg-light",3,"click","ngClass"],["colspan","6"],[1,"text-center","fw-bold",2,"font-size","16px"],["style","cursor: pointer",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[2,"cursor","pointer",3,"click","ngClass"],[1,"text-center"]],template:function(n,i){1&n&&e.DNE(0,X,16,1,"app-card",0)(1,W,74,21,"div",1),2&n&&(e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",!i.loading))},dependencies:[r.YU,r.Sq,r.bT,I.i,R.q,Y,U.F,l.xH,l.y7,l.wz,l.BC,l.vS,r.oe],encapsulation:2})}}return o})(),K=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-invoice-view-header"]],decls:27,vars:0,consts:[[1,"mb-3"],[1,"d-flex","justify-content-between"],[2,"flex","1"],["src","assets/images/acal/acal.jpg","alt","Logo ACAL"],[2,"flex","6"],[1,"h5"],[1,"row","border-top","border-bottom","text-center"],[1,"col-12"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.nrm(3,"img",3),e.k0s(),e.j41(4,"div",4)(5,"p",5),e.EFF(6," CNPJ - 13.228.119/0001-68"),e.nrm(7,"br"),e.EFF(8," Publica\xe7\xe3o do estatuto no Di\xe1rio Oficial de 22-06-1983."),e.nrm(9,"br"),e.EFF(10," Reconhecido como \xd3rg\xe3o de utilidade p\xfablica Municipal - conf.lei N 7 de 27-10-1983."),e.nrm(11,"br"),e.EFF(12," Reconhecido como \xd3rg\xe3o de utilidade p\xfablica Estadual - conf.lei N 7049 de 16-04-1997."),e.nrm(13,"br"),e.EFF(14," Rua Morro do Chap\xe9u, CEP 44709-000, S/N. Telefone: (74) 9 8107-4362"),e.nrm(15,"br"),e.EFF(16," Lages do Batata - Jacobina, BA."),e.nrm(17,"br"),e.EFF(18," Email: acallages@hotmail.com "),e.k0s()()(),e.j41(19,"div",6)(20,"div",7)(21,"h2")(22,"u"),e.EFF(23,"ACAL - Associa\xe7\xe3o Comunit\xe1ria e Assist\xeancial de Lages"),e.k0s()(),e.j41(24,"h6")(25,"u"),e.EFF(26,"ECONOMIZAR \xc1GUA \xc9 UM DEVER DE TODO SER HUMANO."),e.k0s()()()()())},encapsulation:2})}}return o})();var Z=s(922);function q(o,d){if(1&o&&(e.j41(0,"span")(1,"div",9)(2,"div",10)(3,"h2",11),e.EFF(4,"Pago em:"),e.k0s(),e.j41(5,"p",11),e.EFF(6),e.nI1(7,"date"),e.k0s()()()()),2&o){const t=e.XpG();e.R7$(6),e.JRh(e.bMT(7,1,t.invoice.paid_at))}}function ee(o,d){if(1&o&&(e.j41(0,"tr")(1,"td")(2,"strong"),e.EFF(3),e.k0s()(),e.j41(4,"td"),e.EFF(5),e.nI1(6,"currency"),e.k0s()()),2&o){const t=d.$implicit;e.R7$(3),e.SpI("",t.name,":"),e.R7$(2),e.JRh(e.bMT(6,2,t.value))}}let te=(()=>{class o{ngOnInit(){}get now(){return new Date}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-invoice-view-detail"]],inputs:{invoice:"invoice"},decls:74,vars:23,consts:[[1,"row","mb-3"],[1,"d-flex","justify-content-between",2,"gap","1rem"],[1,"border","rounded","text-center",2,"flex","1"],[1,"border","rounded",2,"flex","1"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],[1,"border","rounded",2,"flex","1","min-height","200px"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"container","h-100","d-flex","justify-content-center","align-items-center"],[1,"text-center"],[1,"mb-0"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"strong"),e.EFF(4,"N\xba de Associado"),e.k0s(),e.nrm(5,"br"),e.EFF(6),e.k0s(),e.j41(7,"div",2)(8,"strong"),e.EFF(9,"Boleto n\xba:"),e.k0s(),e.nrm(10,"br"),e.EFF(11),e.k0s(),e.j41(12,"div",2)(13,"strong"),e.EFF(14,"Conta referente:"),e.k0s(),e.nrm(15,"br"),e.EFF(16),e.k0s()()(),e.j41(17,"div",0)(18,"div",1)(19,"div",3)(20,"div",4)(21,"table",5)(22,"tr")(23,"td")(24,"strong"),e.EFF(25,"S\xf3cio:"),e.k0s()(),e.j41(26,"td"),e.EFF(27),e.k0s()(),e.j41(28,"tr")(29,"td")(30,"strong"),e.EFF(31,"Endere\xe7o:"),e.k0s()(),e.j41(32,"td"),e.EFF(33),e.k0s()(),e.j41(34,"tr")(35,"td")(36,"strong"),e.EFF(37,"Local:"),e.k0s()(),e.j41(38,"td"),e.EFF(39,"Lages do Batata - Jacobina BA."),e.k0s()(),e.j41(40,"tr")(41,"td")(42,"strong"),e.EFF(43,"Categoria:"),e.k0s()(),e.j41(44,"td"),e.EFF(45),e.nI1(46,"group"),e.k0s()()()()(),e.j41(47,"div",6),e.DNE(48,q,8,3,"span",7),e.k0s(),e.j41(49,"div",3)(50,"div",4)(51,"table",5)(52,"tr")(53,"td")(54,"strong"),e.EFF(55,"Data de Emiss\xe3o:"),e.k0s()(),e.j41(56,"td"),e.EFF(57),e.nI1(58,"date"),e.k0s()(),e.j41(59,"tr")(60,"td")(61,"strong"),e.EFF(62,"Vencimento:"),e.k0s()(),e.j41(63,"td"),e.EFF(64),e.nI1(65,"date"),e.k0s()(),e.DNE(66,ee,7,4,"tr",8),e.j41(67,"tr")(68,"td")(69,"strong"),e.EFF(70,"Valor total::"),e.k0s()(),e.j41(71,"td"),e.EFF(72),e.nI1(73,"currency"),e.k0s()()()()()()()),2&n&&(e.R7$(6),e.SpI(" ",i.invoice.customer.partner_number," "),e.R7$(5),e.SpI(" ",i.invoice.number," "),e.R7$(5),e.SpI(" ",i.invoice.reference," "),e.R7$(11),e.JRh(i.invoice.customer.name),e.R7$(6),e.E5c("",i.invoice.place.name," ",i.invoice.place.number,"",i.invoice.place.letter,""),e.R7$(12),e.Lme("",e.bMT(46,14,i.invoice.category.group)," ",i.invoice.category.name,""),e.R7$(3),e.Y8G("ngIf",i.invoice.paid_at),e.R7$(9),e.JRh(e.i5U(58,16,i.now,"dd/MM/yyyy")),e.R7$(7),e.JRh(e.bMT(65,19,i.invoice.due_date)),e.R7$(2),e.Y8G("ngForOf",i.invoice.values),e.R7$(6),e.JRh(e.bMT(73,21,i.invoice.total)))},dependencies:[r.Sq,r.bT,r.oe,r.vh,Z.c],encapsulation:2})}}return o})();function ne(o,d){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s()()),2&o){const t=d.$implicit;e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.required),e.R7$(2),e.JRh(t.analyzed),e.R7$(2),e.JRh(t.conformity)}}let ie=(()=>{class o{ngOnInit(){}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-invoice-view-water-quality"]],inputs:{invoice:"invoice"},decls:34,vars:1,consts:[[1,"text-center","mb-2"],[1,"table-responsive","mb-3"],[1,"table","table-bordered","table-striped","text-center"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"mb-3","small-text"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"strong"),e.EFF(2,"PADR\xc3O DA PORTARIA MS 2914/2011"),e.k0s(),e.nrm(3,"br"),e.EFF(4," Decreto Federal n\xba. 5.440/2005\n"),e.k0s(),e.j41(5,"div",1)(6,"table",2)(7,"thead",3)(8,"tr")(9,"th"),e.EFF(10,"Par\xe2metros"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Exigidas"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Analisadas"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Em Conformidade"),e.k0s()()(),e.j41(17,"tbody"),e.DNE(18,ne,9,4,"tr",4),e.k0s()()(),e.j41(19,"div",5)(20,"strong"),e.EFF(21,"Par\xe2metros de Qualidade da \xc1gua"),e.k0s(),e.nrm(22,"br"),e.j41(23,"ul")(24,"li"),e.EFF(25,"Coliformes Totais: Indicador que mensura contamina\xe7\xe3o bacteriol\xf3gica do tipo: bacilos gram-negativos, aer\xf3bios ou anaer\xf3bios facultativos n\xe3o esporog\xeanicos, oxidase-negativos."),e.k0s(),e.j41(26,"li"),e.EFF(27,"E. coli: Indicador que mensura contamina\xe7\xe3o bacteriol\xf3gica de origem fecal."),e.k0s(),e.j41(28,"li"),e.EFF(29,"Cloro Residual: Indicador do Poder Desinfetante oriundo do Cloro (Agente de Desinfec\xe7\xe3o)."),e.k0s(),e.j41(30,"li"),e.EFF(31,"Turbidez: Indicador do espalhamento de luz produzido pela presen\xe7a de part\xedculas em suspens\xe3o ou coloidais."),e.k0s(),e.j41(32,"li"),e.EFF(33,"Cor Aparente: Indicador que mensura a cor em amostras com turbidez."),e.k0s()()()),2&n&&(e.R7$(18),e.Y8G("ngForOf",i.invoice.water_quality.analysis))},dependencies:[r.Sq],encapsulation:2})}}return o})();function re(o,d){if(1&o&&(e.j41(0,"span"),e.nrm(1,"app-invoice-view-water-quality",1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("invoice",t.invoice)}}const oe=[{path:"",component:S},{path:"create",component:Q},{path:"view",component:(()=>{class o{constructor(t,n){this.router=t,this.route=n;const i=this.router.getCurrentNavigation();i?.extras?.state&&i.extras.state.invoice?this.invoice=i.extras.state.invoice:this.back()}back(){this.router.navigate(["../"],{relativeTo:this.route})}get status(){return this.invoice.paid_at?"Pago":"Aguardando"}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(b.Ix),e.rXU(b.nX))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-invoice-view"]],decls:14,vars:3,consts:[[1,"container","border"],[3,"invoice"],[4,"ngIf"],[1,"container","border","mt-3","mb-3"],[1,"row"],[1,"d-flex","justify-content-between","flex-wrap","gap-2"],["type","button",1,"btn","btn-success"],["type","button",1,"btn","btn-danger"],["type","button",1,"btn","btn-primary"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.nrm(1,"app-invoice-view-header")(2,"app-invoice-view-detail",1),e.DNE(3,re,2,1,"span",2),e.nrm(4,"app-invoice-view-detail",1),e.k0s(),e.j41(5,"div",3)(6,"div",4)(7,"div",5)(8,"button",6),e.EFF(9,"Receber"),e.k0s(),e.j41(10,"button",7),e.EFF(11,"Apagar"),e.k0s(),e.j41(12,"button",8),e.EFF(13,"Voltar"),e.k0s()()()()),2&n&&(e.R7$(2),e.Y8G("invoice",i.invoice),e.R7$(),e.Y8G("ngIf",i.invoice.water_quality),e.R7$(),e.Y8G("invoice",i.invoice))},dependencies:[r.bT,K,te,ie],encapsulation:2})}}return o})()}];let ae=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[b.iI.forChild(oe),b.iI]})}}return o})();var se=s(7038);let ce=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({providers:[r.vh],imports:[u.G,ae,r.MD,v.h,h.i,l.YN,l.X1,g.c9,g.h_,g.zH,c.r,E.M.pick(m.Wzl),F.ND,V.V,se.H]})}}return o})()}}]);