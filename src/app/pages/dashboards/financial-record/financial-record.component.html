<div class="accordion w-100 mb-3">
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingOne">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">Filtros</button>
    </h2>

    <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
      <div class="accordion-body">
        <div class="row mb-3">
          <div class="col-md-3 col-6">
            <label class="form-label mb-0">Inicio: </label>
            <input class="form-control flatpickr-input" type="text" mwlFlatpickr [(ngModel)]="filter.date_start" />
          </div>
          <div class="col-md-3 col-6">
            <label class="form-label mb-0">Fim: </label>
            <input class="form-control flatpickr-input" type="text" mwlFlatpickr [(ngModel)]="filter.date_end" />
          </div>
        </div>

        <div class="row">
          <div class="col-6 col-md-2 offset-md-8 mb-3">
            <button type="button" class="btn btn-outline-info w-100" (click)="clear()"><i class="mdi mdi-magnify"></i> Limpar</button>
          </div>

          <div class="col-6 col-md-2">
            <button type="button" class="btn btn-outline-primary w-100" (click)="reset()"><i class="mdi mdi-magnify"></i> Buscar</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <app-card>
      <app-card-header>
        <h5 class="card-title flex-grow-1 mb-0">Caixa</h5>

        <div class="d-flex gap-1 flex-wrap">
          <div class="btn-group">
            <button type="button" class="btn btn-light" (click)="print()">Imprimir</button>
          </div>
        </div>
      </app-card-header>

      <app-card-body>
        <div class="table-responsive table-card" *ngIf="page?.content">
          <table class="table table-striped table-borded align-middle table-nowrap mb-0">
            <thead>
              <tr>
                <th>Date:</th>
                <th>Responsavel:</th>
                <th>NÃºmero:</th>
                <th>Total:</th>
                <th>Motivo:</th>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let item of page?.content; trackBy: trackById; let i = index">
                <td>{{ item.created_at | date }}</td>
                <td>{{ item.created_by }}</td>
                <td>{{ item.number }}</td>
                <td>{{ item.total | currency }}</td>
                <td>{{ item.reason | reason }}</td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td colspan="3" class="text-end"><strong>Total:</strong></td>
                <td colspan="2">
                  <strong>{{ page?.content | sumByKey: 'total' | currency }}</strong>
                </td>
              </tr>
            </tfoot>
          </table>
        </div>
      </app-card-body>

      <app-card-footer>
        <app-pagination [page]="page" (pageChange)="onPageChange($event)" />
      </app-card-footer>
    </app-card>
  </div>
</div>
