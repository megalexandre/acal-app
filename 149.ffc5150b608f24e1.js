"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[149],{1149:(P,m,r)=>{r.r(m),r.d(m,{InvoiceModule:()=>S});var s=r(177),h=r(9417),d=r(9005),u=r(8147),g=r(5464),f=r(6411),b=r(1022),F=r(255),C=r(115),I=r(3887),j=r(1114),p=r(1188),t=r(3953),k=r(5312),R=r(1626);let v=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${k.c.apiUrl}/invoice`}get(){return this.http.get(this.apiUrl)}create(e){return this.http.post(this.apiUrl,e)}update(e){return this.http.put(this.apiUrl,e)}delete(e){return this.http.delete(`${this.apiUrl}/${e}`)}view(e){return this.http.get(`${this.apiUrl}/view/${e}`)}static{this.\u0275fac=function(i){return new(i||n)(t.KVO(R.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var y=r(7509),E=r(6364),x=r(9459),$=r(6356),T=r(7186),G=r(43),M=r(9986);function N(n,l){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td",11),t.EFF(2),t.k0s(),t.j41(3,"td",12)(4,"ul",13)(5,"li",14),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.edit(o))}),t.nrm(6,"i",15),t.k0s(),t.j41(7,"li",16),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.delete(o))}),t.j41(8,"a",17),t.nrm(9,"i",18),t.k0s()()()()()}if(2&n){const e=l.$implicit;t.R7$(2),t.JRh(e.reference)}}function V(n,l){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.nI1(13,"currency"),t.k0s(),t.j41(14,"td",9)(15,"input",10),t.mxI("ngModelChange",function(o){const c=t.eBV(e).$implicit;return t.DH7(c.checked,o)||(c.checked=o),t.Njj(o)}),t.bIt("change",function(){t.eBV(e);const o=t.XpG().$implicit,c=t.XpG(2);return t.Njj(c.onInvoiceCheckedChange(o))}),t.k0s()()()}if(2&n){const e=l.$implicit;t.R7$(2),t.JRh(e.count),t.R7$(2),t.JRh(e.customer.name),t.R7$(2),t.JRh(e.category.name),t.R7$(2),t.JRh(e.place.address),t.R7$(2),t.JRh(e.place.number+" "+e.place.letter),t.R7$(2),t.JRh(t.bMT(13,7,e.total)),t.R7$(3),t.R50("ngModel",e.checked)}}function X(n,l){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"tr",7)(2,"td",8),t.EFF(3),t.k0s(),t.j41(4,"td",9)(5,"input",10),t.mxI("ngModelChange",function(o){const c=t.eBV(e).$implicit;return t.DH7(c.checked,o)||(c.checked=o),t.Njj(o)}),t.bIt("change",function(){const o=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.onGroupCheckedChange(o))}),t.k0s()()(),t.DNE(6,V,16,9,"tr",6),t.bVm()}if(2&n){const e=l.$implicit;t.R7$(3),t.JRh(e.name),t.R7$(2),t.R50("ngModel",e.checked),t.R7$(),t.Y8G("ngForOf",e.InvoicePreviews)}}function B(n,l){if(1&n&&(t.j41(0,"div",1)(1,"table",2)(2,"thead")(3,"tr")(4,"th",3),t.EFF(5,"#"),t.k0s(),t.j41(6,"th",4),t.EFF(7,"Name"),t.k0s(),t.j41(8,"th",4),t.EFF(9,"Categoria"),t.k0s(),t.j41(10,"th",4),t.EFF(11,"Endereco"),t.k0s(),t.j41(12,"th",3),t.EFF(13,"N\xfamero"),t.k0s(),t.j41(14,"th",3),t.EFF(15,"Valor"),t.k0s(),t.j41(16,"th",3),t.EFF(17,"Selecionar"),t.k0s()()(),t.j41(18,"tbody",5),t.DNE(19,X,7,3,"ng-container",6),t.k0s()()()),2&n){const e=t.XpG();t.R7$(19),t.Y8G("ngForOf",e.preview)}}const D=[{path:"",component:(()=>{class n{constructor(e,i,o,c,a){this.router=e,this.route=i,this.invoiceService=o,this.modalService=c,this.toastService=a,this.breadCrumbItems=[],this.invoices=[],this.loading=!0}ngOnInit(){this.breadCrumbItems=[{label:"Dashboards"},{label:"Faturas",active:!0}],this.search()}search(){this.loading=!0,this.invoiceService.get().subscribe({next:e=>{this.invoices=e,this.loading=!1},error:()=>{this.loading=!1}})}create(){this.router.navigate(["create"],{relativeTo:this.route})}edit(e){}delete(e){}openModal(e,i){const c=this.modalService.open(e,{centered:!0}).componentInstance;i&&Object.assign(c,i),c.sent.subscribe(()=>this.search())}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(p.Ix),t.rXU(p.nX),t.rXU(v),t.rXU(d.Bq),t.rXU(y.f))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-invoice"]],decls:20,vars:2,consts:[["title","Faturas",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card-title","flex-grow-1","mb-0"],[1,"d-flex","gap-1","flex-wrap"],["btnType","success","outline","",3,"click"],["table-header","",1,"table-light"],[1,"col-11"],[1,"col-1","text-center"],["table-body","",1,"list","form-check-all"],[4,"ngFor","ngForOf"],[1,"name"],[1,"text-center"],[1,"list-inline","hstack","gap-2","mb-0"],["data-bs-toggle","tooltip","data-bs-trigger","hover","ngbTooltip","Edit","placement","top",1,"list-inline-item","edit",3,"click"],[1,"ri-pencil-fill","fs-16"],["ngbTooltip","Remove","placement","top","data-bs-toggle","tooltip","data-bs-trigger","hover",1,"list-inline-item","me-0",3,"click"],[1,"text-danger","d-inline-block","remove-item-btn"],[1,"ri-delete-bin-5-fill","fs-16"]],template:function(i,o){1&i&&(t.nrm(0,"app-breadcrumbs",0),t.j41(1,"div",1)(2,"div",2)(3,"app-card")(4,"app-card-header")(5,"h5",3),t.EFF(6,"Faturas"),t.k0s(),t.j41(7,"div",4)(8,"app-button",5),t.bIt("click",function(){return o.create()}),t.EFF(9," Adicionar "),t.k0s()()(),t.j41(10,"app-card-body")(11,"app-table")(12,"thead",6)(13,"tr")(14,"th",7),t.EFF(15,"Name"),t.k0s(),t.j41(16,"th",8),t.EFF(17,"Action"),t.k0s()()(),t.j41(18,"tbody",9),t.DNE(19,N,10,1,"tr",10),t.k0s()()()()()()),2&i&&(t.Y8G("breadcrumbItems",o.breadCrumbItems),t.R7$(19),t.Y8G("ngForOf",o.invoices))},dependencies:[E.m,s.Sq,x.Q,$.i,T.l,G.q,M.O],encapsulation:2})}}return n})()},{path:"create",component:(()=>{class n{constructor(e){this.service=e,this.preview=[],this.loading=!0}ngOnInit(){this.load()}load(){this.loading=!0,this.service.view("2025-01").subscribe({next:e=>{this.preview=this.buildPreview(e),this.loading=!1},error:()=>{this.loading=!1,this.preview=[]}})}buildPreview(e){const i=new Map;var o=0;return e.forEach(c=>{const a=c.place.address,J={...c,checked:!1,count:++o};i.has(a)||i.set(a,[]),i.get(a).push(J)}),Array.from(i.entries()).map(([c,a])=>({name:c,checked:!1,InvoicePreviews:a}))}onGroupCheckedChange(e){e.InvoicePreviews.forEach(i=>i.checked=e.checked)}onInvoiceCheckedChange(e){e.checked=e.InvoicePreviews.every(i=>i.checked)}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(v))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-invoice-create"]],decls:1,vars:1,consts:[["class","table-responsive border mb-0","style","max-height: 80vh; overflow-x: auto; overflow-y: auto;",4,"ngIf"],[1,"table-responsive","border","mb-0",2,"max-height","80vh","overflow-x","auto","overflow-y","auto"],[1,"table","table-hover","table-striped","mb-0",2,"width","1200px","min-width","100%"],[2,"width","5%"],[2,"width","20%"],["table-body","",1,"list","form-check-all"],[4,"ngFor","ngForOf"],[1,"bg-primary"],["colspan","6"],[1,"text-center"],["type","checkbox",3,"ngModelChange","change","ngModel"]],template:function(i,o){1&i&&t.DNE(0,B,20,1,"div",0),2&i&&t.Y8G("ngIf",!o.loading)},dependencies:[s.Sq,s.bT,h.Zm,h.BC,h.vS,s.oe],encapsulation:2})}}return n})()}];let O=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[p.iI.forChild(D),p.iI]})}}return n})();var w=r(7038);let S=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({providers:[s.vh],imports:[I.G,O,s.MD,u.h,C.i,h.YN,h.X1,d.c9,d.h_,d.zH,F.r,g.M.pick(f.Wzl),b.ND,j.V,w.H]})}}return n})()}}]);